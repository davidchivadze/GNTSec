

<div class="row">
    <div class="col-12 col-sm-12">
        <div class="card card-success card-tabs">
          <div class="card-header p-0 pt-1">
            <ul class="nav nav-tabs" id="custom-tabs-two-tab" role="tablist">
              <li class="pt-2 px-3"><h3 class="card-title card-title-white">{{'HOME.AllCategories'|translate}}</h3></li>
              <li class="nav-item">
                <a class="nav-link active" id="custom-tabs-two-home-tab" data-toggle="pill" href="#custom-tabs-two-home" role="tab" aria-controls="custom-tabs-two-home" aria-selected="true">მთავარი</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="custom-tabs-two-profile-tab" data-toggle="pill" href="#custom-tabs-two-profile" role="tab" aria-controls="custom-tabs-two-profile" aria-selected="false">ხელფასი</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="custom-tabs-two-messages-tab" data-toggle="pill" href="#custom-tabs-two-messages" role="tab" aria-controls="custom-tabs-two-messages" aria-selected="false">შვებულება</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="custom-tabs-two-messages-tab" data-toggle="pill" href="#custom-tabs-two-salary-graphic" role="tab" aria-controls="custom-tabs-two-salary-graphic" aria-selected="false">გრაფიკი</a>
              </li>
            </ul>
          </div>
          <div class="card-body">
            <div class="tab-content" id="custom-tabs-two-tabContent">
              <div class="tab-pane fade show active" id="custom-tabs-two-home" role="tabpanel" aria-labelledby="custom-tabs-two-home-tab">

                <div class="row">
                  <div class="col-md-2" *ngIf="!AddEmployee.avatarImage">
                    <div class="form-group">
                    <label for="uploadFiles" class="uploadFileLabel" (click)="file.click()"><i class="fas fa-cloud-upload-alt"></i>თანამშრომლის სურათი</label>
                    <input type="file" (change)="onFilesChosen($event)" class="uploadFile" #file>
                  </div>
                  </div>
                  <div class="col-md-2" *ngIf="AddEmployee.avatarImage">
                    <span class="close"><i class="fas fa-times-circle" (click)="removeChosen(i)"></i></span>
                    <img [src]='AddEmployee.avatarImage' class="uploadImageView" />
                  </div>
               
                  <div class="col-md-10" style="padding-top: 50px;">
                    <div class="form-group">
                        <label for="exampleInputEmail1">ID მოწყობილობაში</label>
                        <input [(ngModel)]="AddEmployee.userIdInDevice" id="userIdInDevice" #userIdInDevice="ngModel" class="form-control" >
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">სახელი</label>
                        <input [(ngModel)]="AddEmployee.firsName" id="firsName" #firsName="ngModel" class="form-control" required>

                        <div *ngIf="firsName.invalid && (firsName.dirty || firsName.touched)" class="alert alert-danger">
                              <div *ngIf="firsName.errors.required">
                                  სახელის შევსება სავალდებულოა
                              </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">გვარი</label>
                        <input type="text" [(ngModel)]="AddEmployee.lastName" id="lastName" #lastName="ngModel" class="form-control" required>
                        <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger">
                          <div *ngIf="lastName.errors.required">
                        გვარის შევსება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <!-- <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">ID მოწყობილობაში</label>
                        <input type="text" [(ngModel)]="" class="form-control">
                      </div>
                   </div> -->
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">ბარათის ნომერი</label>
                        <input type="text" [(ngModel)]="AddEmployee.deviceCardID" id="deviceCardID" #deviceCardID="ngModel" class="form-control" >
                        <div *ngIf="deviceCardID.invalid && (deviceCardID.dirty || deviceCardID.touched)" class="alert alert-danger">
                          <div *ngIf="firsName.errors.required">
                              ბარათის ნომრის შევსება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">პირადი ნომერი</label>
                        <input type="text" [(ngModel)]="AddEmployee.personalNumber" id="personalNumber" #personalNumber="ngModel" class="form-control" >
                        <div *ngIf="personalNumber.invalid && (personalNumber.dirty || personalNumber.touched)" class="alert alert-danger">
                          <div *ngIf="personalNumber.errors.required">
                              პირადი ნომრის შევსება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">მისამართი</label>
                        <input type="text" [(ngModel)]="AddEmployee.address" id="address" #address="ngModel" class="form-control" >
                        <div *ngIf="address.invalid && (address.dirty || address.touched)" class="alert alert-danger">
                          <div *ngIf="address.errors.required">
                              მისამართის შევსება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">დავადების თარიღი</label>
                        <input type="date" [(ngModel)]="AddEmployee.dateOfBirth" id="dateOfBirth" #dateOfBirth="ngModel" class="form-control" >
                        <div *ngIf="dateOfBirth.invalid && (dateOfBirth.dirty || dateOfBirth.touched)" class="alert alert-danger">
                          <div *ngIf="dateOfBirth.errors.required">
                              დაბადების თარიღის შევსება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                    <label for="exampleInputEmail1">ფილიალი</label>
                    <select [(ngModel)]="AddEmployee.branchID" class="form-control" *ngIf="BranchList" >
                      <option *ngFor="let branch of BranchList" value="{{branch.iD}}">{{branch.description}}</option>
                    </select>
                    </div>
                   </div>
                   <div class="col-md-6">
                     <div class="form-group">
                    <label for="exampleInputEmail1">დეპარტამენტი</label>
                    <select [(ngModel)]="AddEmployee.departmentID" class="form-control" *ngIf="DepartmentList">
                      <option *ngFor="let department of DepartmentList" value="{{department.iD}}">{{department.description}}</option>
                    </select>
                  </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">თანამდებობა</label>
                        <select [(ngModel)]="AddEmployee.employeePositionID" class="form-control" *ngIf="PositionList">
                          <option *ngFor="let position of PositionList" value="{{position.iD}}">{{position.description}}</option>
                        </select>
                      </div>
                   </div>
                   <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">სქესი</label>
                        <select [(ngModel)]="AddEmployee.genderID" class="form-control" *ngIf="GenderList">
                          <option *ngFor="let gender of GenderList" value="{{gender.iD}}">{{gender.description}}</option>
                        </select>
                      </div>
                   </div>
               </div>
               <div class="col-md-12" *ngIf="!AddEmployee.agreement">
                <div class="form-group">
                <label for="uploadFiles" class="uploadFileLabelLarge" (click)="file1.click()"><i class="fas fa-cloud-upload-alt"></i>დოკუმენტის მიბმა</label>
                <input type="file" (change)="onFilesChosenDoc($event)" class="uploadFile" #file1>
              </div>
              </div>
              <div class="col-md-12" *ngIf="AddEmployee.agreement">
                <span class="close"><i class="fas fa-times-circle" (click)="removeChosenDoc(i)"></i></span>
                <iframe [src]='getDocURL()' class=" col-md-12" ></iframe>
              </div>
           
              </div>
              <div class="tab-pane fade" id="custom-tabs-two-profile" role="tabpanel" aria-labelledby="custom-tabs-two-profile-tab">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                   <label for="exampleInputEmail1">ხელფასი</label>
                   <select [(ngModel)]="SalaryID" class="form-control" *ngIf="SalaryGenerators" (change)="changeSalary()">
                     <option *ngFor="let generator of SalaryGenerators" value="{{generator.iD}}">{{generator.name}}</option>
                   </select>
                 </div>
                  </div>
                  <div class="col-md-6">
                   <div class="form-group">
                       <label for="exampleInputEmail1">ხელფასის დათვლის წესი</label>
                       <select  class="form-control" [(ngModel)]="AddEmployee.salary.salaryTypeID" *ngIf="SalaryTypeList">
                         <option *ngFor="let salaryType of SalaryTypeList" value="{{salaryType.iD}}">{{salaryType.description}}</option>
                       </select>
                     </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">ხელფასი</label>
                        <input type="number" [(ngModel)]="AddEmployee.salary.amount" id="salary" #salary="ngModel" class="form-control" >
                        <div *ngIf="salary.invalid && (salary.dirty || salary.touched)" class="alert alert-danger">
                          <div *ngIf="salary.errors.required">
                              ხელფასის მითითება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                  <hr>
                   <div class="col-md-12">
                     <h3>ჯარიმები</h3>
                   </div>
                  <div class="col-md-6">
                   <div class="form-group">
                       <label for="exampleInputEmail1">ჯარიმის დათვლის წესი</label>
                       <select  class="form-control" [(ngModel)]="AddEmployee.fine.fineTypeID" *ngIf="FineTypeList">
                         <option *ngFor="let fine of FineTypeList" value="{{fine.iD}}">{{fine.description}}</option>
                       </select>
                     </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                        <label for="exampleInputEmail1">ჯარიმა</label>
                        <input type="number" [(ngModel)]="AddEmployee.fine.amount" id="fine" #fine="ngModel" class="form-control" >
                        <div *ngIf="fine.invalid && (fine.dirty || fine.touched)" class="alert alert-danger">
                          <div *ngIf="fine.errors.required">
                              ჯარიმის მითითება სავალდებულოა
                          </div>
                        </div>
                      </div>
                   </div>
                   <div class="col-md-12">
                    <h3>პატიებები</h3>
                  </div>
                 <div class="col-md-6">
                  <div class="form-group">
                      <label for="exampleInputEmail1">პატიებები დათვლის წესი</label>
                      <select  class="form-control" [(ngModel)]="AddEmployee.forgiveness.forgivenessTypeID" *ngIf="ForgivenessTypeList">
                        <option *ngFor="let forgiveness of ForgivenessTypeList" value="{{forgiveness.iD}}">{{forgiveness.description}}</option>
                      </select>
                    </div>
                 </div>
                 <div class="col-md-6">
                   <div class="form-group">
                       <label for="exampleInputEmail1">პატიება</label>
                       <input type="number" [(ngModel)]="AddEmployee.forgiveness.amount" id="forgiveness" #forgiveness="ngModel" class="form-control" >
                       <div *ngIf="forgiveness.invalid && (forgiveness.dirty || forgiveness.touched)" class="alert alert-danger">
                        <div *ngIf="forgiveness.errors.required">
                            პატიების მითითება სავალდებულოა
                        </div>
                      </div>
                     </div>
                  </div>
              </div>
              </div>
              <div class="tab-pane fade" id="custom-tabs-two-messages" role="tabpanel" aria-labelledby="custom-tabs-two-messages-tab" >
                  <div class="row" *ngFor="let holiday of AddEmployee.employeeHolidays; let i = index" >
                    <div class="col-md-6">
                      <label for="exampleInputEmail1">შვებულების ტიპი</label>
                      <select [(ngModel)]="AddEmployee.employeeHolidays[i].holidayTypeID" class="form-control" *ngIf="HolidayTypes">
                        <option *ngFor="let holidayType of HolidayTypes" value="{{holidayType.iD}}">{{holidayType.description}}</option>
                      </select>
                    </div>
                    
                    <div class="col-md-6">
                      <label for="exampleInputEmail1">დღეების რაოდენობა</label>
                      <input type="number" [(ngModel)]="AddEmployee.employeeHolidays[i].allWritten" id="holidays" #holidays="ngModel" class="form-control" >
                      <div *ngIf="holidays.invalid && (holidays.dirty || holidays.touched)" class="alert alert-danger">
                        <div *ngIf="holidays.errors.required">
                            შვებულების დღეების მითითება სავალდებულოა
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                  <div class="col-md-12">
                    <button class="btn btn-default col-md-12 addHolidayTypeButton" (click)="addHolidayType()">
                      <i class="fas fa-plus-circle"></i> დამატება
                    </button>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="custom-tabs-two-salary-graphic" role="tabpanel" aria-labelledby="custom-tabs-two-messages-tab">
                <div class="row">
                  <div class="col-md-12">
                    <!-- <label for="checkbox">სტანდარტული გრაფიკი</label>
                    <input type="checkbox"  [checked]="standartSchedule" style="margin-left: 2%;" (change)="changeScheduleType()"/> -->
                    <div class="col-md-6">
                      <div class="form-group">
                     <label for="exampleInputEmail1">გრაფიკი</label>
                     <select [(ngModel)]="ScheduleID" class="form-control" *ngIf="ScheduleGenerators" (change)="changeSchedule()">
                       <option *ngFor="let generator of ScheduleGenerators" value="{{generator.iD}}">{{generator.name}}</option>
                     </select>
                   </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="standartSchedule; else individualSchedule">
                <div class="row">
                  <input type="hidden" ng-model="AddEmployee.schedule.scheduleTypeID" ng-value="1" ng-init="AddEmployee.schedule.scheduleTypeID=1">
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">დაწყების დრო</label>
                  <input type="time" [(ngModel)]="AddEmployee.schedule.startTime" id="startTime" #startTime="ngModel" class="form-control" >
                  <div *ngIf="startTime.invalid && (startTime.dirty || startTime.touched)" class="alert alert-danger">
                    <div *ngIf="startTime.errors.required">
                        დაწყების დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                  
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">დასრულების დრო</label>
                  <input type="time"  [(ngModel)]="AddEmployee.schedule.endTime" id="endTime" #endTime="ngModel" class="form-control" >
                  <div *ngIf="endTime.invalid && (endTime.dirty || endTime.touched)" class="alert alert-danger">
                    <div *ngIf="endTime.errors.required">
                        დასრულების დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">მინიმალური მოსვლის დრო</label>
                  <input type="time"  [(ngModel)]="AddEmployee.schedule.minCheckInTime" id="minCheckInTime" #minCheckInTime="ngModel" class="form-control" >
                  <div *ngIf="minCheckInTime.invalid && (minCheckInTime.dirty || minCheckInTime.touched)" class="alert alert-danger">
                    <div *ngIf="minCheckInTime.errors.required">
                      მინიმალური მოსვლის დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">მაქსიმალური გასვლის დრო</label>
                  <input type="time"  [(ngModel)]="AddEmployee.schedule.maxCheckOutTime" id="maxCheckOutTime" #maxCheckOutTime="ngModel" class="form-control" >
                  <div *ngIf="maxCheckOutTime.invalid && (maxCheckOutTime.dirty || maxCheckOutTime.touched)" class="alert alert-danger">
                    <div *ngIf="maxCheckOutTime.errors.required">
                      მაქსიმალური გასვლის დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">შესვენებაზე გასვლის დრო</label>
                  <input type="time"  [(ngModel)]="AddEmployee.schedule.breakStartTime" id="breakStartTime" #breakStartTime="ngModel" class="form-control" >
                  <div *ngIf="breakStartTime.invalid && (breakStartTime.dirty || breakStartTime.touched)" class="alert alert-danger">
                    <div *ngIf="breakStartTime.errors.required">
                      შესვენებაზე გასვლის დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">შესვენებიდან დაბრუნების დრო</label>
                  <input type="time"  [(ngModel)]="AddEmployee.schedule.breakEndTime" id="breakEndTime" #breakEndTime="ngModel" class="form-control" >
                  <div *ngIf="breakEndTime.invalid && (breakEndTime.dirty || breakEndTime.touched)" class="alert alert-danger">
                    <div *ngIf="breakEndTime.errors.required">
                      შესვენებიდან დაბრუნების დროის მითითება სავალდებულოა
                    </div>
                  </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">მხოლოდ სამუშოა დღეებში</label>
                  <select class="form-control" [(ngModel)]="AddEmployee.schedule.onWorkingDaysOnly" >
                  <option value="true">კი</option>
                  <option value="false">არა</option>  
                  </select>
                  </div>
                  
                  <div class="col-md-6">
                  
                      <label for="exampleInputEmail1">მხოლოდ სამუშოა საათებში</label>
                    <select class="form-control" [(ngModel)]="AddEmployee.schedule.onWorkingHouresOnly" >
                    <option value="true">კი</option>
                    <option value="false">არა</option>  
                    </select>
                  
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">დღეში სამუშაო საათები</label>
                    <input type="number" [(ngModel)]="AddEmployee.schedule.daylyHouresAmount" id="dayHours" #dayHours="ngModel" class="form-control" >
                    <div *ngIf="dayHours.invalid && (dayHours.dirty || dayHours.touched)" class="alert alert-danger">
                      <div *ngIf="dayHours.errors.required">
                          დღიური სამუშაო საათების მითითება სავალდებულოა
                      </div>
                    </div>
                  </div>
                  
                  <div class="col-md-6">
                      <label for="exampleInputEmail1">კვირაში სამუშაო საათები</label>
                      <input type="number" [(ngModel)]="AddEmployee.schedule.weekHouresAmount" id="weekHours" #weekHours="ngModel" class="form-control" >
                      <div *ngIf="weekHours.invalid && (weekHours.dirty || weekHours.touched)" class="alert alert-danger">
                        <div *ngIf="weekHours.errors.required">
                            კვირის სამუშაო საათების მითითება სავალდებულოა
                        </div>
                      </div>
                  </div>
                  <div class="col-md-6">
                    <label for="exampleInputEmail1">დღეში შესვენების დრო საათებში</label>
                    <input type="text" [(ngModel)]="AddEmployee.schedule.breakAmount" id="breakAmount" #breakAmount="ngModel" class="form-control"  >
                    <div *ngIf="breakAmount.invalid && (breakAmount.dirty || breakAmount.touched)" class="alert alert-danger">
                      <div *ngIf="breakAmount.errors.required">
                          დღეში შესვენების დროის მითითება სავალდებულოა
                      </div>
                    </div>
                </div>
                </div>
              </div>
           
              <ng-template #individualSchedule>
                <input type="hidden" ng-model="AddEmployee.schedule.scheduleTypeID" ng-value="2" ng-init="AddEmployee.schedule.scheduleTypeID=2">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="exampleInputFile">ინდივიდუალური გრაფიკის ფაილის არჩევა (.xlsx ფორმატი)</label>
                      <div class="input-group">
                        <div class="custom-file">
                          <input type="file" class="custom-file-input" id="exampleInputFile">
                          <label class="custom-file-label" for="exampleInputFile">აირჩიეთ ფაილი</label>
                        </div>
                        <div class="input-group-append">
                          <span class="input-group-text" id="">ატვირთვა</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
            </div>
          </div>
          <!-- /.card -->
        </div>
      </div>
<div class="col-md-12">

    <div class="alert alert-danger col-12" *ngIf="ErrorMessageResponse">
      {{ErrorMessageResponse}}
    </div>
    <div class="alert alert-info col-12 successAddInfo"  *ngIf="ShowSuccess">
     თანამშრომლის დასრულება წარმატებით დასრულდა, გვერდის გასუფთავებამდე დარჩა {{TimeLeft}}
    </div>
  
  <button class="btn btn-success col-12" (click)="addEmployeeSubmit()">დამატება</button>
</div>
</div>